import{I as Z,P as fe,g as ne,aD as me,h as ve,ae as U,an as pe,a7 as ye,a1 as G,b0 as ge,az as Q,w as V,aK as be,ay as he,b1 as Ce,aA as we,aT as H,Y as J,Z as K,d as Y,p as R,b2 as X,D as C,aB as ke,b3 as Ee,a5 as ee,b4 as Se,c as T,j as O,y as x,q as W,s as k,S as o,B as Me,l as D,k as j,z as Be,b as De,A as q,v as le,_ as ae,b5 as Ie,a0 as Te,aC as Le,u as oe,r as I,ak as Ae,b6 as $e,b7 as te,n as Fe,ab as Oe,b8 as se,a2 as Pe,m as Ne,a as ze,a$ as Re,a_ as Ye,G as _e,H as We,b9 as He,af as Xe}from"./index-9677e2f8.js";import{X as xe,U as ie,a7 as Ue}from"./index-41153a34.js";let _;const Ve=e=>{var t;if(!Z)return 0;if(_!==void 0)return _;const s=document.createElement("div");s.className=`${e}-scrollbar__wrap`,s.style.visibility="hidden",s.style.width="100px",s.style.position="absolute",s.style.top="-9999px",document.body.appendChild(s);const l=s.offsetWidth;s.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",s.appendChild(i);const u=i.offsetWidth;return(t=s.parentNode)==null||t.removeChild(s),_=l-u,_},Ke=(...e)=>t=>{e.forEach(s=>{fe(s)?s(t):s.value=t})},je=(e,t,s)=>{let l={offsetX:0,offsetY:0};const i=a=>{const d=a.clientX,v=a.clientY,{offsetX:f,offsetY:g}=l,m=e.value.getBoundingClientRect(),c=m.left,h=m.top,L=m.width,P=m.height,N=document.documentElement.clientWidth,A=document.documentElement.clientHeight,z=-c+f,$=-h+g,E=N-c-L+f,S=A-h-P+g,F=w=>{const n=Math.min(Math.max(f+w.clientX-d,z),E),b=Math.min(Math.max(g+w.clientY-v,$),S);l={offsetX:n,offsetY:b},e.value.style.transform=`translate(${U(n)}, ${U(b)})`},p=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",p)},u=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};ne(()=>{me(()=>{s.value?u():r()})}),ve(()=>{r()})},qe=(e,t={})=>{pe(e)||ye("[useLockscreen]","You need to pass a ref param to this function");const s=t.ns||G("popup"),l=ge(()=>s.bm("parent","hidden"));if(!Z||Q(document.body,l.value))return;let i=0,u=!1,r="0";const a=()=>{setTimeout(()=>{we(document==null?void 0:document.body,l.value),u&&document&&(document.body.style.width=r)},200)};V(e,d=>{if(!d){a();return}u=!Q(document.body,l.value),u&&(r=document.body.style.width),i=Ve(s.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=be(document.body,"overflowY");i>0&&(v||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${i}px)`),he(document.body,l.value)}),Ce(()=>a())},re=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let t=!1,s=!1;return{onClick:r=>{t&&s&&e(r),t=s=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{s=r.target===r.currentTarget}}},Ze=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:K([String,Array,Object])},zIndex:{type:K([String,Number])}}),Ge={click:e=>e instanceof MouseEvent},Je="overlay";var Qe=Y({name:"ElOverlay",props:Ze,emits:Ge,setup(e,{slots:t,emit:s}){const l=G(Je),i=d=>{s("click",d)},{onClick:u,onMousedown:r,onMouseup:a}=re(e.customMaskEvent?void 0:i);return()=>e.mask?R("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:a},[C(t,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const eo=Qe,ce=Symbol("dialogInjectionKey"),ue=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ee},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),oo={close:()=>!0},to=["aria-level"],so=["aria-label"],no=["id"],lo=Y({name:"ElDialogContent"}),ao=Y({...lo,props:ue,emits:oo,setup(e){const t=e,{t:s}=xe(),{Close:l}=Ie,{dialogRef:i,headerRef:u,bodyId:r,ns:a,style:d}=ee(ce),{focusTrapRef:v}=ee(Se),f=T(()=>[a.b(),a.is("fullscreen",t.fullscreen),a.is("draggable",t.draggable),a.is("align-center",t.alignCenter),{[a.m("center")]:t.center},t.customClass]),g=Ke(v,i),m=T(()=>t.draggable);return je(i,u,m),(c,h)=>(O(),x("div",{ref:o(g),class:k(o(f)),style:le(o(d)),tabindex:"-1"},[W("header",{ref_key:"headerRef",ref:u,class:k(o(a).e("header"))},[C(c.$slots,"header",{},()=>[W("span",{role:"heading","aria-level":c.ariaLevel,class:k(o(a).e("title"))},Me(c.title),11,to)]),c.showClose?(O(),x("button",{key:0,"aria-label":o(s)("el.dialog.close"),class:k(o(a).e("headerbtn")),type:"button",onClick:h[0]||(h[0]=L=>c.$emit("close"))},[R(o(De),{class:k(o(a).e("close"))},{default:D(()=>[(O(),j(Be(c.closeIcon||o(l))))]),_:1},8,["class"])],10,so)):q("v-if",!0)],2),W("div",{id:o(r),class:k(o(a).e("body"))},[C(c.$slots,"default")],10,no),c.$slots.footer?(O(),x("footer",{key:0,class:k(o(a).e("footer"))},[C(c.$slots,"footer")],2)):q("v-if",!0)],6))}});var io=ae(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ro=J({...ue,appendToBody:Boolean,beforeClose:{type:K(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ie]:e=>Te(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,t)=>{const l=Ae().emit,{nextZIndex:i}=Le();let u="";const r=oe(),a=oe(),d=I(!1),v=I(!1),f=I(!1),g=I(e.zIndex||i());let m,c;const h=Ue("namespace",$e),L=T(()=>{const y={},B=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(y[`${B}-margin-top`]=e.top),e.width&&(y[`${B}-width`]=U(e.width))),y}),P=T(()=>e.alignCenter?{display:"flex"}:{});function N(){l("opened")}function A(){l("closed"),l(ie,!1),e.destroyOnClose&&(f.value=!1)}function z(){l("close")}function $(){c==null||c(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=te(()=>p(),e.openDelay):p()}function E(){m==null||m(),c==null||c(),e.closeDelay&&e.closeDelay>0?{stop:c}=te(()=>w(),e.closeDelay):w()}function S(){function y(B){B||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(y):E()}function F(){e.closeOnClickModal&&S()}function p(){Z&&(d.value=!0)}function w(){d.value=!1}function n(){l("openAutoFocus")}function b(){l("closeAutoFocus")}function M(y){var B;((B=y.detail)==null?void 0:B.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&qe(d);function de(){e.closeOnPressEscape&&S()}return V(()=>e.modelValue,y=>{y?(v.value=!1,$(),f.value=!0,g.value=e.zIndex?g.value++:i(),Fe(()=>{l("open"),t.value&&(t.value.scrollTop=0)})):d.value&&E()}),V(()=>e.fullscreen,y=>{t.value&&(y?(u=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=u)}),ne(()=>{e.modelValue&&(d.value=!0,f.value=!0,$())}),{afterEnter:N,afterLeave:A,beforeLeave:z,handleClose:S,onModalClick:F,close:E,doClose:w,onOpenAutoFocus:n,onCloseAutoFocus:b,onCloseRequested:de,onFocusoutPrevented:M,titleId:r,bodyId:a,closed:v,style:L,overlayDialogStyle:P,rendered:f,visible:d,zIndex:g}},fo=["aria-label","aria-labelledby","aria-describedby"],mo=Y({name:"ElDialog",inheritAttrs:!1}),vo=Y({...mo,props:ro,emits:co,setup(e,{expose:t}){const s=e,l=Oe();se({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},T(()=>!!l.title)),se({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},T(()=>!!s.customClass));const i=G("dialog"),u=I(),r=I(),a=I(),{visible:d,titleId:v,bodyId:f,style:g,overlayDialogStyle:m,rendered:c,zIndex:h,afterEnter:L,afterLeave:P,beforeLeave:N,handleClose:A,onModalClick:z,onOpenAutoFocus:$,onCloseAutoFocus:E,onCloseRequested:S,onFocusoutPrevented:F}=uo(s,u);Pe(ce,{dialogRef:u,headerRef:r,bodyId:f,ns:i,rendered:c,style:g});const p=re(z),w=T(()=>s.draggable&&!s.fullscreen);return t({visible:d,dialogContentRef:a}),(n,b)=>(O(),j(He,{to:"body",disabled:!n.appendToBody},[R(We,{name:"dialog-fade",onAfterEnter:o(L),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:D(()=>[Ne(R(o(eo),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":o(h)},{default:D(()=>[W("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:o(v),"aria-describedby":o(f),class:k(`${o(i).namespace.value}-overlay-dialog`),style:le(o(m)),onClick:b[0]||(b[0]=(...M)=>o(p).onClick&&o(p).onClick(...M)),onMousedown:b[1]||(b[1]=(...M)=>o(p).onMousedown&&o(p).onMousedown(...M)),onMouseup:b[2]||(b[2]=(...M)=>o(p).onMouseup&&o(p).onMouseup(...M))},[R(o(ze),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(E),onFocusoutPrevented:o(F),onReleaseRequested:o(S)},{default:D(()=>[o(c)?(O(),j(io,Re({key:0,ref_key:"dialogContentRef",ref:a},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:o(w),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:o(A)}),Ye({header:D(()=>[n.$slots.title?C(n.$slots,"title",{key:1}):C(n.$slots,"header",{key:0,close:o(A),titleId:o(v),titleClass:o(i).e("title")})]),default:D(()=>[C(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:D(()=>[C(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,fo)]),_:3},8,["mask","overlay-class","z-index"]),[[_e,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var po=ae(vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const bo=Xe(po);export{eo as E,qe as a,re as b,bo as c,je as u};
